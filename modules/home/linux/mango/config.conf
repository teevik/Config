# =============================================================================
# Mangowc Configuration
# Based on Hyprland and Niri configurations
# =============================================================================

# =============================================================================
# Window Effects
# =============================================================================
blur=1
blur_layer=1
blur_optimized=1
blur_params_num_passes=3
blur_params_radius=10
blur_params_noise=0.02
blur_params_brightness=0.9
blur_params_contrast=0.9
blur_params_saturation=1.2

shadows=1
shadow_only_floating=0
shadows_size=50
shadows_blur=50
shadows_position_x=0
shadows_position_y=5
shadowscolor=0x1a1a1a1a

border_radius=4
focused_opacity=1.0
unfocused_opacity=1.0

# =============================================================================
# Animation Configuration
# =============================================================================
animations=1
layer_animations=1
animation_type_open=slide
animation_type_close=slide
layer_animation_type_open=slide
layer_animation_type_close=slide
animation_fade_in=1
animation_fade_out=1
tag_animation_direction=1

animation_duration_move=200
animation_duration_open=200
animation_duration_tag=250
animation_duration_close=200
animation_duration_focus=0

# Ease-out-expo approximation
animation_curve_open=0.16,1.0,0.3,1.0
animation_curve_move=0.16,1.0,0.3,1.0
animation_curve_tag=0.16,1.0,0.3,1.0
animation_curve_close=0.16,1.0,0.3,1.0

# =============================================================================
# Layout Settings (Tile - similar to dwindle)
# =============================================================================
new_is_master=1
default_mfact=0.55
default_nmaster=1
smartgaps=0

# =============================================================================
# Appearance
# =============================================================================
gappih=8
gappiv=8
gappoh=12
gappov=12
borderpx=2

# Colors (Catppuccin-inspired based on your theme)
bordercolor=0x44444430
focuscolor=0xad741fff
scratchpadcolor=0x516c93ff

# Scratchpad size
scratchpad_width_ratio=0.8
scratchpad_height_ratio=0.9

# =============================================================================
# Input Settings
# =============================================================================
repeat_rate=25
repeat_delay=600
numlockon=1

# Keyboard layout
xkb_rules_layout=us,no
xkb_rules_options=grp:alt_shift_toggle,caps:escape

# Trackpad
tap_to_click=1
tap_and_drag=1
drag_lock=1
trackpad_natural_scrolling=1
disable_while_typing=0
left_handed=0
middle_button_emulation=0

# Mouse
mouse_natural_scrolling=0
accel_profile=0
accel_speed=0.0

# =============================================================================
# Miscellaneous
# =============================================================================
drag_tile_to_tile=1
view_current_to_back=0
sloppyfocus=1
warpcursor=1
focus_on_activate=1
cursor_hide_timeout=10
cursor_size=24
single_scratchpad=1

# =============================================================================
# Startup
# =============================================================================
exec-once=systemctl restart --user marble.service swaybg.service kanshi.service
# exec-once=1password

# =============================================================================
# Tag Rules - Default Layouts
# =============================================================================
tagrule=id:1,layout_name:center_tile
tagrule=id:2,layout_name:center_tile
tagrule=id:3,layout_name:center_tile
tagrule=id:4,layout_name:center_tile
tagrule=id:5,layout_name:center_tile
tagrule=id:6,layout_name:center_tile
tagrule=id:7,layout_name:center_tile
tagrule=id:8,layout_name:center_tile
tagrule=id:9,layout_name:center_tile
tagrule=id:0,layout_name:center_tile

# =============================================================================
# Window Rules - Floating Apps
# =============================================================================
windowrule=isfloating:1,appid:yad
windowrule=isfloating:1,appid:nm-connection-editor
windowrule=isfloating:1,appid:pavucontrol
windowrule=isfloating:1,appid:xfce-polkit
windowrule=isfloating:1,appid:kvantummanager
windowrule=isfloating:1,appid:qt5ct
windowrule=isfloating:1,appid:VirtualBox Manager
windowrule=isfloating:1,appid:qemu
windowrule=isfloating:1,appid:Qemu-system-x86_64
windowrule=isfloating:1,appid:1Password
windowrule=isfloating:1,appid:org.gnome.Calculator
windowrule=isfloating:1,appid:org.gnome.Nautilus
windowrule=isfloating:1,appid:blueberry.py
windowrule=isfloating:1,appid:org.gnome.Settings
windowrule=isfloating:1,appid:org.gnome.design.Palette
windowrule=isfloating:1,appid:Color Picker
windowrule=isfloating:1,appid:xdg-desktop-portal
windowrule=isfloating:1,appid:xdg-desktop-portal-gnome
windowrule=isfloating:1,appid:xdg-desktop-portal-gtk
windowrule=isfloating:1,appid:de.haeckerfelix.Fragments
windowrule=isfloating:1,appid:confirm
windowrule=isfloating:1,appid:blueman
windowrule=isfloating:1,appid:org.gnome.PowerStats

# Suppress maximize for libreoffice
windowrule=ignore_maximize:1,appid:libreoffice.*

# Named scratchpads
windowrule=isnamedscratchpad:1,width:1280,height:800,appid:spotify
windowrule=isnamedscratchpad:1,width:1280,height:800,appid:vesktop

# =============================================================================
# Layer Rules
# =============================================================================
layerrule=noblur:1,layer_name:selection

# =============================================================================
# Key Bindings
# =============================================================================

# Reload config
bind=SUPER,r,reload_config

# Terminal
bind=SUPER+SHIFT,Return,spawn,kitty
bind=SUPER,Return,spawn,kitty

# Apps
bind=SUPER,d,spawn,tofi-drun --drun-launch=true
bind=SUPER,w,spawn,firefox
bind=SUPER,f,spawn,nautilus
bind=SUPER,e,spawn,code
bind=SUPER,s,spawn_shell,env XDG_CURRENT_DESKTOP=gnome gnome-control-center

# Named scratchpads
bind=SUPER,m,toggle_named_scratchpad,spotify,none,spotify
bind=SUPER,BackSpace,toggle_named_scratchpad,vesktop,none,vesktop

# Screenshot (using grimblast)
bind=NONE,Print,spawn_shell,XDG_SCREENSHOTS_DIR=$HOME/Pictures/Screenshots grimblast --notify copysave output
bind=CTRL,Print,spawn_shell,XDG_SCREENSHOTS_DIR=$HOME/Pictures/Screenshots grimblast --notify copysave area

# Window management
bind=SUPER,q,killclient
bind=CTRL+ALT,Delete,quit
bind=SUPER,a,togglefullscreen
bind=SUPER,Space,togglefloating
bind=SUPER+SHIFT,q,spawn,poweroff

# Focus
bind=SUPER,Left,focusdir,left
bind=SUPER,Right,focusdir,right
bind=SUPER,Up,focusdir,up
bind=SUPER,Down,focusdir,down

# Move windows
bind=SUPER+SHIFT,Left,exchange_client,left
bind=SUPER+SHIFT,Right,exchange_client,right
bind=SUPER+SHIFT,Up,exchange_client,up
bind=SUPER+SHIFT,Down,exchange_client,down

# Resize
bind=SUPER+CTRL,Left,resizewin,-20,0
bind=SUPER+CTRL,Right,resizewin,20,0
bind=SUPER+CTRL,Up,resizewin,0,-20
bind=SUPER+CTRL,Down,resizewin,0,20

# Master layout
bind=SUPER,Tab,zoom
bind=SUPER+SHIFT,l,setmfact,+5
bind=SUPER+SHIFT,h,setmfact,-5

# Workspaces (tags)
bind=SUPER,1,view,1
bind=SUPER,2,view,2
bind=SUPER,3,view,3
bind=SUPER,4,view,4
bind=SUPER,5,view,5
bind=SUPER,6,view,6
bind=SUPER,7,view,7
bind=SUPER,8,view,8
bind=SUPER,9,view,9
bind=SUPER,0,view,0

# Send to workspaces
bind=SUPER+SHIFT,1,tag,1
bind=SUPER+SHIFT,2,tag,2
bind=SUPER+SHIFT,3,tag,3
bind=SUPER+SHIFT,4,tag,4
bind=SUPER+SHIFT,5,tag,5
bind=SUPER+SHIFT,6,tag,6
bind=SUPER+SHIFT,7,tag,7
bind=SUPER+SHIFT,8,tag,8
bind=SUPER+SHIFT,9,tag,9
bind=SUPER+SHIFT,0,tag,0

# Workspace navigation
bind=SUPER,Page_Down,viewtoright_have_client
bind=SUPER,Page_Up,viewtoleft_have_client
bind=SUPER+SHIFT,Page_Down,tagtoright
bind=SUPER+SHIFT,Page_Up,tagtoleft

# Function keys
bind=NONE,XF86MonBrightnessUp,spawn_shell,brightnessctl s --min-value=10 --exponent=2 7%+
bind=NONE,XF86MonBrightnessDown,spawn_shell,brightnessctl s --min-value=10 --exponent=2 7%-
bind=NONE,XF86AudioRaiseVolume,spawn_shell,pulsemixer --change-volume +10
bind=NONE,XF86AudioLowerVolume,spawn_shell,pulsemixer --change-volume -10
bind=NONE,XF86AudioMute,spawn_shell,pulsemixer --toggle-mute
bind=NONE,XF86AudioNext,spawn_shell,playerctl next
bind=NONE,XF86AudioPrev,spawn_shell,playerctl previous
bind=NONE,XF86AudioPlay,spawn_shell,playerctl play-pause
bind=NONE,XF86AudioStop,spawn_shell,playerctl stop

# Overview
bind=ALT,Tab,toggleoverview

# =============================================================================
# Mouse Bindings
# =============================================================================
mousebind=SUPER,btn_left,moveresize,curmove
mousebind=SUPER,btn_right,moveresize,curresize

# =============================================================================
# Axis Bindings (scroll wheel)
# =============================================================================
axisbind=SUPER,UP,viewtoleft_have_client
axisbind=SUPER,DOWN,viewtoright_have_client

# =============================================================================
# Gesture Bindings (touchpad)
# =============================================================================
gesturebind=NONE,left,3,focusdir,left
gesturebind=NONE,right,3,focusdir,right
gesturebind=NONE,up,3,focusdir,up
gesturebind=NONE,down,3,focusdir,down
gesturebind=NONE,left,4,viewtoleft_have_client
gesturebind=NONE,right,4,viewtoright_have_client
gesturebind=NONE,up,4,toggleoverview
gesturebind=NONE,down,4,toggleoverview
