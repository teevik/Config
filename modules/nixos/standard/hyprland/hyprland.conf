# Monitor Configuration (managed by nwg-displays)
source = ~/.config/hypr/monitors.conf
source = ~/.config/hypr/workspaces.conf

# Startup
exec-once = uwsm app -- 1password --silent

# Cursor
cursor {
    inactive_timeout = 10
}

# Misc
misc {
    disable_splash_rendering = true
    force_default_wallpaper = true
    focus_on_activate = true
    animate_manual_resizes = true
    close_special_on_empty = false
    on_focus_under_fullscreen = 2
    middle_click_paste = false
}

# Input
input {
    kb_layout = us,no
    kb_options = grp:alt_shift_toggle,caps:escape

    follow_mouse = 1
    natural_scroll = false

    touchpad {
        natural_scroll = true
        disable_while_typing = false
    }

    sensitivity = 0
}

# XWayland
xwayland {
    force_zero_scaling = true
}

# # Device-specific
# device {
#     name = logitech-usb-receiver
#     sensitivity = 0
# }

# Gestures
gesture = 3, horizontal, workspace

# General
general {
    layout = dwindle

    gaps_in = 8
    gaps_out = 12
    border_size = 2

    col.active_border = rgb(eba0ac)
    col.inactive_border = rgba(eba0ac30)
}

# Dwindle Layout
dwindle {
    preserve_split = true
    smart_split = true
}

# Master Layout
master {
    orientation = center
    slave_count_for_center_master = 0
}

# Decoration
decoration {
    rounding = 4

    dim_inactive = true
    dim_strength = 0
    dim_special = 0.5

    shadow {
        enabled = true
        offset = 0 5
        range = 50
        render_power = 3
        color = rgba(1a1a1a1a)
    }

    blur {
        enabled = true
        size = 10
        passes = 3
        new_optimizations = true
        xray = true
        special = true
    }
}

# Animations
bezier = default, 0.05, 0.9, 0.1, 1.05

animation = windows, 1, 7, default
animation = windowsOut, 1, 7, default, popin 80%
animation = border, 1, 10, default
animation = borderangle, 1, 8, default
animation = fade, 1, 7, default
animation = workspaces, 1, 6, default

# Plugin Configuration
plugin {
    split-monitor-workspaces {
        count = 10
        keep_focused = true
        enable_notifications = false
        enable_persistent_workspaces = true
    }
}

# Window Rules
windowrule = match:class ^(yad|nm-connection-editor|pavucontrolk|xfce-polkit|kvantummanager|qt5ct|VirtualBox Manager|qemu|Qemu-system-x86_64|1Password|org.gnome.Calculator|org.gnome.Nautilus|pavucontrol|nm-connection-editor|blueberry.py|org.gnome.Settings|org.gnome.design.Palette|Color Picker|xdg-desktop-portal|xdg-desktop-portal-gnome|de.haeckerfelix.Fragments)$, float on
windowrule = match:class ^(libreoffice.*)$, suppress_event maximize
windowrule = match:class ^(steam)$, stay_focused on
windowrule = match:class ^(steam)$, min_size 1 1

# Layer Rules
layerrule = match:namespace bar, blur on
layerrule = match:namespace osd, blur on
layerrule = match:namespace notifications, blur on
layerrule = match:namespace launcher, blur on

# Keybinds - Terminal
bind = SUPER_SHIFT, Return, exec, uwsm app -- kitty
bind = SUPER, Return, exec, hyprland-scratchpad toggle-exec --name terminal --exec 'uwsm app -- kitty'

# Keybinds - Apps
bind = SUPER, D, exec, uwsm app -- tofi-drun --drun-launch=true
bind = SUPER, W, exec, uwsm app -- firefox
bind = SUPER, F, exec, uwsm app -- nautilus
bind = SUPER, E, exec, uwsm app -- code
bind = SUPER, Backspace, exec, hyprland-scratchpad toggle-exec --name discord --exec 'uwsm app -- vesktop'
bind = SUPER, M, exec, hyprland-scratchpad toggle-exec --name spotify --exec 'uwsm app -- spotify'
bind = SUPER, S, exec, hyprland-scratchpad toggle-exec --name settings --exec 'uwsm app -- env XDG_CURRENT_DESKTOP=gnome gnome-control-center'

# Keybinds - Screenshot
bind = , Print, exec, XDG_SCREENSHOTS_DIR=/home/teevik/Pictures/Screenshots grimblast --notify copysave output
bind = CTRL, Print, exec, XDG_SCREENSHOTS_DIR=/home/teevik/Pictures/Screenshots grimblast --notify copysave area

# Keybinds - Hyprland
bind = SUPER, Q, killactive,
bind = CTRLALT, Delete, exit,
bind = SUPER, A, fullscreen,
bind = SUPER, Space, togglefloating,
bind = SUPER_SHIFT, Q, exec, poweroff

bind = SUPER, L, exec, hyprctl keyword general:layout "dwindle"
bind = SUPER_SHIFT, L, exec, hyprctl keyword general:layout "master"

# Keybinds - Function Keys
binde = ,XF86MonBrightnessUp, exec, brightnessctl s --min-value=10 --exponent=2 7%+
binde = ,XF86MonBrightnessDown, exec, brightnessctl s --min-value=10 --exponent=2 7%-
binde = ,XF86AudioRaiseVolume, exec, pulsemixer --change-volume +10
binde = ,XF86AudioLowerVolume, exec, pulsemixer --change-volume -10
bind = ,XF86AudioMute, exec, pulsemixer --toggle-mute
bind = ,XF86AudioNext, exec, playerctl next
bind = ,XF86AudioPrev, exec, playerctl previous
bind = ,XF86AudioPlay, exec, playerctl play-pause
bind = ,XF86AudioStop, exec, playerctl stop

# Keybinds - Workspace Scrolling
bind = SUPER, mouse_down, split-cycleworkspaces, +1
bind = SUPER, mouse_up, split-cycleworkspaces, -1
bind = , mouse_right, split-cycleworkspaces, +1
bind = , mouse_left, split-cycleworkspaces, -1

# Keybinds - Focus
bind = SUPER, left, movefocus, l
bind = SUPER, right, movefocus, r
bind = SUPER, up, movefocus, u
bind = SUPER, down, movefocus, d

# Keybinds - Move Windows
bind = SUPERSHIFT, left, movewindow, l
bind = SUPERSHIFT, right, movewindow, r
bind = SUPERSHIFT, up, movewindow, u
bind = SUPERSHIFT, down, movewindow, d
bindm = SUPER, mouse:272, movewindow
bindm = SUPERSHIFT, mouse:272, resizewindow
bind = SUPER, mouse:273, togglesplit

# Keybinds - Resize
bind = SUPERCTRL, left, resizeactive, -20 0
bind = SUPERCTRL, right, resizeactive, 20 0
bind = SUPERCTRL, up, resizeactive, 0 -20
bind = SUPERCTRL, down, resizeactive, 0 20

# Keybinds - Workspaces
bind = SUPER, 1, split-workspace, 1
bind = SUPER, 2, split-workspace, 2
bind = SUPER, 3, split-workspace, 3
bind = SUPER, 4, split-workspace, 4
bind = SUPER, 5, split-workspace, 5
bind = SUPER, 6, split-workspace, 6
bind = SUPER, 7, split-workspace, 7
bind = SUPER, 8, split-workspace, 8
bind = SUPER, 9, split-workspace, 9
bind = SUPER, 0, split-workspace, 10

# Keybinds - Send to Workspaces
bind = SUPER_SHIFT, 1, split-movetoworkspacesilent, 1
bind = SUPER_SHIFT, 2, split-movetoworkspacesilent, 2
bind = SUPER_SHIFT, 3, split-movetoworkspacesilent, 3
bind = SUPER_SHIFT, 4, split-movetoworkspacesilent, 4
bind = SUPER_SHIFT, 5, split-movetoworkspacesilent, 5
bind = SUPER_SHIFT, 6, split-movetoworkspacesilent, 6
bind = SUPER_SHIFT, 7, split-movetoworkspacesilent, 7
bind = SUPER_SHIFT, 8, split-movetoworkspacesilent, 8
bind = SUPER_SHIFT, 9, split-movetoworkspacesilent, 9
bind = SUPER_SHIFT, 0, split-movetoworkspacesilent, 10
